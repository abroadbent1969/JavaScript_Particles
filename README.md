The JavaScript code implements an interactive particle system on an HTML5 canvas (800x600 pixels), designed to create dynamic visual effects by simulating particles that respond to user inputs and media content. It initializes 10–1000 particles (default 500), each with randomized positions, velocities, and shapes (circles, squares, or stars), which are attracted to dark regions of an uploaded video or image based on a user-adjustable darkness threshold (0–1, default 0.85). The system processes media frames every 100ms, analyzing pixel brightness to identify attractors, with a step size of 10 pixels to optimize performance. Particles exhibit behaviors like direct attraction or orbiting, controlled via a dropdown, and their size (0.5x–5x) is adjustable through a slider. Additional features include particle trails via semi-transparent canvas clearing, color mapping from media pixels, and a toggle to display the media faintly in the background. User interactions include mouse-driven vortex effects, Xbox controller support for attraction points, and real-time updates to ensure smooth video responsiveness, with velocity damping (0.98) and increased attractor force (0.03) for fluid motion.
